#!/bin/bash

# pettil/tools/mkpet
# target  mask  machine
#   0        1  PET #700251
#   1        2  Upgrade PET
#   2        4  4.0 PET
#   3        8  80-column PET
#           16  Plus/4
#   4       32  VIC-20
#   5       64  Commodore 64
#          128  Commodore 128

cd ~/pettil/


for arg in "$@"
do
    if [ -z "${PERTURB+xxx}" ]
     then moncommand=obj/pettil.mon${arg}
     else moncommand=obj/perturb/${PERTURB}.mon${arg}
    fi

    case $arg in
# PET #700251
        "0" )
            export ADDR='0401'
    xfce4-terminal --command="xpet      \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_chitselb.vicerc \
        -iosize 2048 -petdww -petdwwimage data/dwwimage.dww \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

# PET3
        "1" )
            export ADDR='0401'
    xfce4-terminal --command="xpet      \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_pet3.vicerc \
        -iosize 2048 -petdww -petdwwimage data/dwwimage.dww \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

# PET4
        "2" )
            export ADDR='0401'
    xfce4-terminal --command="xpet      \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_pet4.vicerc \
        -iosize 2048 -petdww -petdwwimage data/dwwimage.dww \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

# PET80
        "3" )
            export ADDR='0401'
    xfce4-terminal --command="xpet      \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_pet80.vicerc \
        -iosize 2048 -petdww -petdwwimage data/dwwimage.dww \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

        "4" )
            export ADDR='1201'
    xfce4-terminal --command="xvic      \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_chitselb.vicerc \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

        "5" )
            export ADDR='0801'
    xfce4-terminal --command="x64                                               \
        -moncommand ${moncommand}                                                \
        -config data/sdl2_chitselb.vicerc \
        -8 chitselb.d64                 \
        -9 pettil.d64                   \
        -warp" &
           ;;

    esac
done
exit
